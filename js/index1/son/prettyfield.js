!function(){var t=".submenu .selected",e=".submenu .menu",a='<div class="submenu"><div class="selected">{SELECTED}<span>+</span></div><div class="menu hide"><ul>{LIST}</ul></div></div>',n=function(n,s){var i=[],l=n.find("select"),o=function(t,e,a,n){var s=12*n.length+20;t.parent().width(s),e.width(a-s+4)};if(l[0]){for(var r,u=l[0].options[l[0].selectedIndex].text,d=0,c=l[0].options.length;d<c;d++)r=l[0].options[d],u===r.text?i.push('<li class="hide"><a href="#'+d+'">'+r.text+"</a></li>"):i.push('<li><a href="#'+d+'">'+r.text+"</a></li>");l.parent().after(a.replace("{SELECTED}",u).replace("{LIST}",i.join("")));var f=n.find(e),v=n.find(t),h=$(n.find("input")[0]),p=h.width();o(v,h,p,u),v.click(function(t){var e=$(t.currentTarget),a=e.hasClass("open");a?(e.removeClass("open"),f.addClass("hide")):(e.addClass("open"),f.removeClass("hide")),t.stopPropagation()}).mouseover(function(t){var e=$(t.currentTarget);e.parent().css("background-color","#f2f2f2")}).mouseout(function(t){var e=$(t.currentTarget);e.parent().css("background-color","#fff")}),f.click(function(t){var e,a,i=t.target;"a"===i.tagName.toLowerCase()&&(e=parseInt(i.href.split("#")[1]),a=$(i).html(),l[0].options[e].selected=!0,v.html(a+"<span>+</span>"),f.find(".hide").removeClass("hide"),$(i).parent().addClass("hide"),h[0].focus(),t.preventDefault(),o(v,h,p,a),s&&s(e,l[0],n))}),$(document.body).click(function(t){v.removeClass("open"),f.addClass("hide")})}},s=function(t){var e=t.find("input[type=text]");""!==e[0].value&&e[0].value!==e.attr("title")||(e[0].value=e.attr("title"),e.css("color","#d4d4d4")),e.data("label",e.attr("title")).attr("title",""),e.focus(function(){this.value===$(this).data("label")&&(this.value="",$(this).css("color","#000"))}).blur(function(){""===this.value&&(this.value=$(this).data("label"),$(this).css("color","#d4d4d4"))})},i=function(t,e){s(t),n(t,e),t.submit(function(t){var e=$(this).find("input")[0];e.value===e.rel&&(e.value="")})};$.fn.prettyField=function(t){i($(this),t)}}();
